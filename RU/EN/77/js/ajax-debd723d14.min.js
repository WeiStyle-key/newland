function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var chlenruslana=1,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define(["analitics"],(function(e){var t=(function(){function t(){_classCallCheck(this,t)}return t.load=function(e){var n=[],o=e.url,r=e.data,a=e.method.toUpperCase(),c=e.callback;for(var s in r)if(null!==r[s]&&void 0!==r[s]&&""!==r[s]&&"undefined"!==r[s])if("[object Array]"===Object.prototype.toString.call(r[s])){var i=r[s];i.forEach((function(e){n.push(encodeURIComponent(s)+"[]="+encodeURIComponent(e))}))}else"[object Object]"===Object.prototype.toString.call(r[s])?n=this.serialize(r[s],s):n.push(encodeURIComponent(s)+"="+encodeURIComponent(r[s]));var l="GET"!==a&&"DELETE"!==a||!n.length?o:o+"?"+n.join("&");t.send({url:l,callback:c,method:a,data:"POST"===a?n.join("&"):null})},t.serialize=function(e,t){var n=[];for(var o in e)if(e.hasOwnProperty(o)){var r=t?t+"["+o+"]":o,a=e[o];n.push("object"===("undefined"==typeof a?"undefined":_typeof(a))?this.serialize(a,r):encodeURIComponent(r)+"="+encodeURIComponent(a))}return n},t.get=function(e,n,o,r){t.buildRequest(e,n,o,r,"GET")},t.post=function(e,n,o,r){t.buildRequest(e,n,o,r,"POST")},t["delete"]=function(e,n,o,r){t.buildRequest(e,n,o,r,"DELETE")},t.buildRequest=function(e,n,o,r,a){t.load({url:e,data:n,cache:r,method:a,callback:o})},t.getScript=function(e,n){"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);var o=n||function(){},r=0;t.urls=t.urls||[];for(var a,c,s=e.length,i=document,l=i.createDocumentFragment(),u=i.createElement("script"),p=function(){r++,r===e.length&&o()};s--;)t.urls.indexOf(e[s])>=0?p():(a=u.cloneNode(!1),"https:"===location.protocol&&e[s].search("https")===-1&&(e[s]=e[s].replace("http","https")),a.src=e[s],a.type="text/javascript",a.onload=p,a.async=!0,l.appendChild(a),t.urls.push(e[s]));c=i.getElementsByTagName("head")[0],c.appendChild(l)},t.send=function(n){var o=new XMLHttpRequest;o.open(n.method,n.url,n.async||!0),o.onreadystatechange=function(e){t.onreadystatechange(e,n,o)},o.onerror=function(){t.showError(),e.trackEvent({url:n.url,type:"Errors",status:404})},"POST"===n.method&&"string"==typeof n.data&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("Async-Page","1"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Accept","application/json, text/javascript"),o.send(n.data)},t.onreadystatechange=function(n,o,r){var a=n.target,c=a.readyState;if(4===c){r&&(r.onreadystatechange=null);var s=a.status;if(200===s||0===s&&a.responseText.length){var i=t.parse(a.responseText);i&&"pixelCode"in i&&t.insertPixel(),o.callback&&o.callback(i,o.url)}else 0!==s&&(t.showError(),e.trackEvent({url:o.url,type:"Errors",status:s}),App.context.dev||setTimeout((function(){window.location.href="/"}),1e3),o.url.indexOf("page")>=0&&e.pageview(o.url))}},t.parse=function(e){try{return JSON.parse(e)}catch(t){console.log(e),console.warn(t)}},t.insertPixel=function(){var e=document.createElement("iframe");e.src="/track",e.height="1",e.width="1",document.body.appendChild(e)},t.showError=function(){require(["notify"],(function(e){e.show({customClass:"info-error",n:App.context.translates.ErrorMessage,m:App.context.translates.TryAgain,s:0,type:0})}))},t})();return t}));
//# sourceMappingURL=ajax-debd723d14.min.js.map
