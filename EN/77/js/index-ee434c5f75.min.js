function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var chlenruslana=1;define(["querySelector","header","banners","location","menu","page","localCache","analitics","scroll","Modal","navPremiumPromo","smsConfirm","trigerMenu","ddownTrigger","firebase","naRefresh","naClick","notify"],(function(e,t,n,o,i,a,r,s,d,l,c,f,u,p,m,g,w,b){var h=(function(){function r(s){_classCallCheck(this,r),r.context=s,r.firstInit=!0,r.pageview=0,r.adsview=0,r.embedAds=0,r.photoEmpty=r.context.photoEmpty,r.revMtime=window.revMtime||!1,new e,new o((!0)),new i,u.bind(),p.init(),require(["chatPolling"],(function(e){new e})),t&&(t.previousPage(),t.hideByScroll());var d=new a;if(d.containerAddClass(),a.skipInterestsPromo(),new n,r.execute(r.context.actionName,null,r.context),w.bindClickAll(),r.firstInit&&require(["ajax"],(function(e){window.addEventListener("beforeinstallprompt",(function(t){e.get("/promt",{beforeinstall:1}),t.userChoice.then((function(t){"dismissed"===t.outcome?e.get("/promt",{dismissed:1}):e.get("/promt",{choice:1})}))}))})),f.init(),r.fixedBannerItem=document.querySelector("#fixed-banner"),r.fixedBanner(),r.context.b_notify){var l=document.getElementById("notify-global");l.style.zIndex="30000";var c={m:"You have a new message",n:r.context.b_notify.b_user.name,p:r.context.b_notify.photo,r:s.userId,s:r.context.b_notify.b_user.id,type:200};b.show(c)}m.init()}return r.execute=function(e){var o=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var d,l=(new Date).getTime(),c=this.getActionHandler(e);r.pageview>0&&g.hideAll(),r.context.disableAdsShow?n.hide():(n.show(),n.hide(n.topMessages,n.bottomMessages)),window.NativeSlots={},window.dfpData&&a.dfpPage&&(dfpData.page=a.dfpPage),a.sms_verification_status&&require(["smsConfirm"],(function(e){r.context.sms_verification_status=a.sms_verification_status,e.init()})),require([c],(function(e){r.pageview+=1,d=new e,t.update(i),s.pageview();var n=(new Date).getTime(),c=n-l,f=r.context.userId%2===0?"load=50":"load";s.trackTiming(f,c),a.dfpPage&&(r.context.dfpTargetData.page=a.dfpPage),r.bannerRefresh(a);var u=parseInt(r.context.userId%100/10,10);(r.pageview>1||[].includes(u))&&(g.reloadAll(),Array.prototype.forEach.call(Q(".na_sm_thread"),(function(e){w.bindClick(e)}))),r.executeJsCallback(a.js_callback),r.firstInit&&(r.firstInit=!1),o.noPeoplePage(),r.fixedBanner();var p=sessionStorage.getItem("history_conversions_count");sessionStorage.setItem("history_conversions_count",++p)}))}},r.bannerRefresh=function(e){var t=window.location.pathname;return window.dfpData.action&&window.onepixel&&+window.dfpData.action>2&&+window.dfpData.action<30&&window.googletag&&googletag.cmd.push((function(){window.onepixel.inited?window.onepixel.count<3&&(window.onepixel.count++,n.setTargeting(window.dfpData,window.onepixel),googletag.pubads().refresh(window.onepixel)):(window.onepixel.count=1,n.setTargeting(window.dfpData,window.onepixel),googletag.display("div-gpt-ad-1446228003991-0"),window.onepixel.inited=!0,n.debugSlots([window.onepixel]))})),r.firstInit?void n.refresh(t,e):n.checkBanners(t,e)},r.executeJsCallback=function(e){if(e&&e.length){var t=e.indexOf("."),n=e.substring(0,t);require([n],(function(){try{window.eval(e)}catch(t){console.warn(t)}}))}},r.getActionHandler=function(e){return e=e.replace("smartmobile",""),e=e.replace(/_/g," "),e=e.replace(/^(.)|\s(.)/g,(function(e){return e.toUpperCase()}))+"Action",e=e.replace(/ /g,""),e=e[0].toUpperCase()+e.slice(1)},r.checkRevTime=function(e){r.revMtime&&e!==r.revMtime&&(s.trackEvent({url:window.location.pathname,type:"Site reload",status:"rev time different"}),clearTimeout(r.reloadPageTimer),r.reloadPageTimer=setTimeout((function(){location.href.indexOf("thread")===-1&&location.reload()}),6e4))},r.noPeoplePage=function(){var e=document.querySelector(".cont-empty-despair");if(e){e.removeAttribute("style");var t=e.getBoundingClientRect(),n=window.innerHeight,o=e.querySelector("img");e.style.height=n-t.top+"px",o.style.display="inline",o.onload=function(){r.fixedBanner()}}},r.getFBStatus=function(e){require(["fbHelper"],(function(t){t.loadSDK((function(){t.getLoginStatus((function(t){t&&(e&&e(t),require(["cookies"],(function(e){e.raw=!0,e("fb_login",JSON.stringify(t),{})})))}))}))}))},r.fixedBanner=function(){if(r.fixedBannerItem){var e=document.querySelector("#content-holder");switch(r.fixedBannerItem.style.position="fixed",r.fixedBannerItem.style.bottom="0",r.fixedBannerItem.style.top="initial",e.style.paddingTop="0",e.style.paddingBottom="0",n.bottom&&(n.bottom.parentNode.style.paddingBottom="50px"),r.context.actionName){case"smartmobile_index":r.fixedBannerItem.style.position="static",n.bottom&&(n.bottom.parentNode.style.paddingBottom="0");break;case"smartmobile_messages_thread":r.fixedBannerItem.style.bottom="initial",r.fixedBannerItem.style.top="83px",e.style.paddingTop="50px"}!n.getVisibleBanners(n.bottom).length&&n.getVisibleBanners(n.fixed)&&(e.style.paddingBottom="50px")}},r.fontLoading=function(){document.body.className.indexOf("webfont-loaded")>=0||require(["fontfaceobserver","cookies"],(function(e,t){var n=new FontFaceObserver("Roboto-Light"),o=new FontFaceObserver("Roboto-Medium"),i=new FontFaceObserver("Roboto-Regular"),a=new FontFaceObserver("Roboto-Bold");Promise.all([n.load(),o.load(),i.load(),a.load()]).then((function(){t("webfont-loaded",!0,{}),document.body.className+=" webfont-loaded",console.log("web fonts loaded")}))["catch"]((function(e){document.body.className+=document.body.className.replace("webfont-loaded",""),console.log("Font load error"),console.log(e)}))}))},r})();return window.App=h,h}));
//# sourceMappingURL=index-ee434c5f75.min.js.map
