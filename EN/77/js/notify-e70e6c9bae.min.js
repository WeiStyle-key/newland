function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var chlenruslana=1;define(["analitics","dom","ajax","require"],(function(t,n,e,i){var o=(function(){function o(){_classCallCheck(this,o)}return o.show=function(t){o.notifications=o.notifications||[],o.container=Q("#notify-global")[0],t&&o.notifications.push(t);var e=Q("#ps-premium-global")[0];!o.notifications[0]||n.isVisible(o.container)||location.href.indexOf("premium")!==-1||n.isVisible(e)||(o.updateContainer(o.notifications[0]),o.notifications.shift())},o.close=function(t){clearTimeout(o.timer),o.container&&(o.container.style.display="none",t?o.notifications=[]:setTimeout((function(){o.show()}),100));var n=document.querySelector("#notify-error-coonection");n&&(n.style.display="none")},o.updateContainer=function(t){var n=o.container,i=Q(".notify-photo img")[0],a=Q(".notify-meta")[0],r=Q(".notify-msg")[0];if(t.m&&t.n){if(!(i&&a&&r&&n))return void console.warn("!---------------NOTIFY CONTAINER IS BROKEN---------------!");51!==+t.type&&52!==+t.type||(t.m='<img src="'+t.m+'" />'),i.src=t.p,a.innerHTML=t.n,r.innerHTML=t.m,n.setAttribute("data-id",t.s),n.className="",n.setAttribute("data-type",t.type),n.style.display="block",t.customClass&&(n.className+=" "+t.customClass),o.bind(),clearTimeout(o.timer);var s=1e4;o.timer=setTimeout((function(){o.close()}),s),+t.s&&e.post("/notify",{action:"show",r:App.context.userId,s:t.s,type:t.type});var c=document.querySelector("#notify-error-coonection");c&&(c.style.display="none")}},o.bind=function(){var n=Q(".notify-close")[0];n&&(n.onclick=function(t){t.preventDefault(),t.stopPropagation();var n=o.container.getAttribute("data-id"),i=o.container.getAttribute("data-type");o.close(),n&&"0"!==n&&e.post("/notify",{action:"close",r:App.context.userId,s:n,type:i})});var a=Q(".notify-inner")[0];a&&(a.onclick=function(n){n.preventDefault(),n.stopPropagation();var a=o.container.getAttribute("data-id"),r=o.container.getAttribute("data-type");if(o.container.className.indexOf("info-error")>=0)return"contactsLimit"===r&&i(["globalPremiumModal"],(function(t){var n="/premium?context=premium_smart_contacts_limit";t.load(n)})),o.close();if(!~n.target.className.indexOf("close")){if(a.indexOf("undefined")>=0&&t.trackEvent({type:"smart: notify undefined",status:a,url:window.location.pathname}),a){e.post("/notify",{action:"click",r:App.context.userId,s:a,type:r});var s=i("location");+a!==+App.context.userId&&parseInt(a,10)?s.parseHref(null,"/thread"+a):s.parseHref(null,"/messages")}o.close()}},a.onmouseenter=function(){clearTimeout(o.timer)},a.onmouseleave=function(){o.timer=setTimeout((function(){o.close()}),4e3)})},o})();return o}));
//# sourceMappingURL=notify-e70e6c9bae.min.js.map
