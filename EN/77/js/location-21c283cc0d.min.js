function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var chlenruslana=1;define(["dom","ajax","page","trigerMenu","ddownTrigger","Modal"],(function(e,t,o,a,n,i){var r=(function(){function r(e){_classCallCheck(this,r),r.page=new o,e&&r.bind()}return r.bind=function(){if(window.history&&window.history.pushState&&"function"==typeof window.history.pushState){var e="on"+(document.ontouchstart?"touchstart":"click");document[e]=this.onclick.bind(this),window.onpopstate=this.onpopstate.bind(this),this.syncPageCount=0,this.syncPageMaxCount=5}},r.onclick=function(t){if("_blank"!=t.target.getAttribute("target")&&1===e.which(t)&&!t.defaultPrevented){for(var o=t.target;o&&"A"!==o.nodeName;)o=o.parentNode;if(o&&"A"===o.nodeName&&this.sameOrigin(o.href)){t.preventDefault();var a=o.pathname+o.search+(o.hash||"");this.parseHref(o,a)}}},r.locationChange=function(e){e.preventDefault();var t=e.currentTarget;this.parseHref(t)},r.parseHref=function(t,o){if(t||o){var a=t;if(!t&&o){var n=document.createElement("a");n.href=o,a=n}var i=a.search,r=a.pathname,p=e.parseGet(i),s="true"===a.getAttribute("data-cache"),c="true"===a.getAttribute("data-page-reload"),l=r.indexOf("help/support")>=0;return c||l?void(window.location.href=r+a.search):(r=a.pathname+(a.hash||""),r.indexOf("premium")>=0&&location.href.indexOf("premium")<0?this.loadPremium(r+a.search):void this.loadPage(r,!0,p,r+a.search,s))}},r.loadPage=function(e){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.location.href,p=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!Q("#content-holder")[0])return document.location.href=e;if(this.page.toggleSpinner(),this.page.globalButtonUpdate(),"/sign/out"===e)return document.location=e;"f"==App.context.userGender&&App.pageview%4===0&&App.photoEmpty&&e.indexOf("profile/photos")<0&&0!==App.pageview&&(e="/profile/photos",a={upload:1},r="/profile/photos?upload=1"),App.pageview%3===0&&App.context.userNeedActivation&&e.indexOf("profile/confirm")<0&&0!==App.pageview&&(e="/profile/confirm",a={},r="/profile/confirm",App.context.userNeedActivation=!1),App.context.needRelocate&&2==App.pageview&&i.load("relocate");var s=(App.context.userId%10,document.querySelector("#try-get-number-index"));s&&"/"!=e?s.style.display="none":!s||"/"!=e||s.classList.contains("disabled")||App.context.smsDisabled||(s.style.display="block"),t.get(e,a,(function(t){n.success(t,r,o,e,p)}),p)},r.loadPremium=function(e){e&&require(["globalPremiumModal"],(function(t){t.load(e)}))},r.success=function(e,t,o,i){var r=this,p=e||{};return p.redirect?location.href=p.redirect:p.userData&&p.userData.actionName?(o&&this.changeHistory(t,p.title||""),App.photoEmpty&&(App.photoEmpty=p.userData.photoEmpty),App.context.actionName=p.userData.actionName,App.context.page_call_hash=p.userData.page_call_hash,App.context.hide_ads=p.userData.hide_ads,this.page.render(p.html,p.userData||p.userDataMsg),void setTimeout((function(){Header.previousPage(),Header.resetHeaderByScoll(),a.processNavTabConf(p.navTabConfig),n.update(p.ddownTabConfig),App.checkRevTime(p.revMtime),r.page.globalButtonUpdate(p.globalButtons),App.execute(p.userData.actionName,p.title,p.userData),App.context.isUserVip=p.isVip||App.context.isUserVip,r.page.toggleSpinner()}),0)):location.reload()},r.changeHistory=function(e,t){return window.history&&window.history.pushState?(history.PREV_URL=location.href,void history.pushState(null,t,e)):void(window.location.href=e)},r.onpopstate=function(){var t=this,o=e.parseGet(),a=r.getUrl(window.location.href,!1);setTimeout((function(){t.loadPage(a,!1,o,void 0,!1)}),0)},r.getUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=document.createElement("a");return o.href=e,t?o.pathname+o.search:o.pathname},r.sameOrigin=function(e){var t=location.protocol+"//"+location.hostname;return e&&0===e.indexOf(t)},r})();return r}));
//# sourceMappingURL=location-21c283cc0d.min.js.map
