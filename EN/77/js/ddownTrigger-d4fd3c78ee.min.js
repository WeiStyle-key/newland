function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var chlenruslana=1;define(["ajax","notify"],(function(t,e){return (function(){function n(){_classCallCheck(this,n)}return n.init=function(){this.list=Q(".ddown-list")[0],this.icon=Q(".ddown-icon")[0],App.firstInit&&document.body.addEventListener("click",this.hideList.bind(this),!1),this.icon&&this.list&&this.bind()},n.update=function(t){var e=Q(".ddown-icon")[0],n=Q(".ddown-list")[0];e&&(t&&t.enabled?t&&t.enabled&&(e.style.display="block",n.innerHTML=t.template||""):e.style.display="none")},n.bind=function(){var t=this;this.icon.onclick=this.toggleList.bind(this),this.list.onclick=function(e){var n=e.target,s=n.className;s.indexOf("complain-thread")>=0?(e.preventDefault(),t.complain(n)):s.indexOf("unblacklist-thread")>=0?(e.preventDefault(),t.unblacklist(n)):s.indexOf("add-to-contact")>=0?(e.preventDefault(),t.addToContacts(n)):s.indexOf("remove-from-contacts")>=0?(e.preventDefault(),t.removeFromContacts(n)):s.indexOf("messages-chage")>=0&&(e.preventDefault(),t.editMessages(n))}},n.toggleList=function(){var t="block"===this.list.style.display?"none":"block";this.list.style.display=t},n.hideList=function(t){var e=Q(".ddown-list")[0],n=t.target;e&&(n&&n.className.indexOf&&n.className.indexOf("ddown-icon")>=0||"block"===e.style.display&&(e.style.display="none"))},n.complain=function(t){var e=t.getAttribute("data-id");e&&Modal.load("complain",{user_id:e})},n.unblacklist=function(e){e.parentNode.removeChild(e);var n=e.getAttribute("data-id");t.post("/messages/spam",{user_id:n,from_thread:1,disable_user:0},(function(){document.location.reload()}))},n.addToContacts=function(n){var s=n.getAttribute("data-id");s&&t.post("/messages/contacts",{id:s},(function(t){return t&&t.result&&"LIMIT"===t.result?void e.show({customClass:"info-error",n:App.context.translates.ContactsLimitText,m:App.context.translates.GetUnlimText,s:0,type:"contactsLimit"}):void(t&&t.result&&n&&n.parentNode&&n.parentNode.removeChild(n))}))},n.removeFromContacts=function(e){var n=e.getAttribute("data-id");n&&t["delete"]("/messages/contacts/",{uid:n},(function(t){t&&t.result&&e.parentNode.removeChild(e)}))},n.editMessages=function(){var t,e=Q(".contacts-page .contact-list")[0],n=Q(".delete-alert")[0];e&&(t=e.className,t.indexOf("show-check")>=0?(e.className=t.replace(" show-check",""),n.className=n.className.replace(" show-delete","")):(e.className+=" show-check",n.className+=" show-delete"))},n})()}));
//# sourceMappingURL=ddownTrigger-d4fd3c78ee.min.js.map
